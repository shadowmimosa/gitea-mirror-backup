# ============================================================
# Gitea é•œåƒå¤‡ä»½ç³»ç»Ÿ - Docker éƒ¨ç½²é…ç½®ç¤ºä¾‹
# ============================================================
# 
# ğŸ“– ä½¿ç”¨è¯´æ˜ï¼š
#   æ­¤é…ç½®æ–‡ä»¶ç”¨äº Docker éƒ¨ç½²
#   è·¯å¾„ä½¿ç”¨å®¹å™¨å†…è·¯å¾„ï¼ˆ/shared/...ï¼‰
#   
#   å¦‚æœæ˜¯ç›´æ¥éƒ¨ç½²ï¼ˆé Dockerï¼‰ï¼Œè¯·å‚è€ƒ config.example.yaml
#
# ============================================================

# ============================================================
# Gitea Docker é…ç½®
# ============================================================
gitea:
  # Docker å®¹å™¨åç§°ï¼ˆéœ€è¦ä¸å®é™…è¿è¡Œçš„ Gitea å®¹å™¨åä¸€è‡´ï¼‰
  docker_container: "gitea"
  
  # Docker å®¹å™¨å†…çš„ Git ç”¨æˆ·ï¼ˆé€šå¸¸æ˜¯ 'git'ï¼‰
  docker_git_user: "git"
  
  # Gitea æ•°æ®ç›®å½•ï¼ˆå®¹å™¨å†…è·¯å¾„ï¼‰
  data_volume: "/shared/gitea"
  
  # Gitea ä»“åº“åœ¨å·ä¸­çš„ç›¸å¯¹è·¯å¾„
  repos_path: "git/repositories"

# ============================================================
# å¤‡ä»½é…ç½®
# ============================================================
backup:
  # å¤‡ä»½æ ¹ç›®å½•ï¼ˆå®¹å™¨å†…è·¯å¾„ï¼‰
  root: "/shared/backup"
  
  # åªå¤‡ä»½ç‰¹å®šç»„ç»‡çš„ä»“åº“ï¼ˆç•™ç©ºæˆ–ç©ºæ•°ç»„åˆ™å¤‡ä»½æ‰€æœ‰ï¼‰
  # ç¤ºä¾‹: ["Org1", "Org2", "Org3"]
  organizations: []
  
  # æ˜¯å¦åªå¤‡ä»½é•œåƒä»“åº“ï¼ˆå¦‚æœä¸º falseï¼Œå¤‡ä»½æ‰€æœ‰ä»“åº“ï¼‰
  check_mirror_only: false
  
  # ä¿ç•™ç­–ç•¥
  retention:
    # å¿«ç…§ä¿ç•™å¤©æ•°ï¼ˆè¶…è¿‡æ­¤å¤©æ•°çš„å¿«ç…§ä¼šè¢«æ¸…ç†ï¼Œé™¤éè¢«ä¿æŠ¤ï¼‰
    snapshots_days: 30
    
    # æ¯æœˆå½’æ¡£ä¿ç•™æœˆæ•°
    archives_months: 12
    
    # æŠ¥å‘Šä¿ç•™å¤©æ•°ï¼ˆè¶…è¿‡æ­¤å¤©æ•°çš„æŠ¥å‘Šä¼šè¢«æ¸…ç†ï¼Œé™¤éè¢«ä¿æŠ¤ï¼‰
    reports_days: 30

# ============================================================
# å¼‚å¸¸æ£€æµ‹é…ç½®
# ============================================================
alerts:
  # æäº¤æ•°å¼‚å¸¸é˜ˆå€¼ï¼ˆå‡å°‘ç™¾åˆ†æ¯”ï¼‰
  # å½“æäº¤æ•°å‡å°‘è¶…è¿‡æ­¤ç™¾åˆ†æ¯”æ—¶è§¦å‘è­¦å‘Š
  commit_decrease_threshold: 10
  
  # ä»“åº“å¤§å°å¼‚å¸¸é˜ˆå€¼ï¼ˆå‡å°‘ç™¾åˆ†æ¯”ï¼‰- ä»…ä½œä¸ºè¾…åŠ©å‚è€ƒ
  size_decrease_threshold: 30
  
  # å¼‚å¸¸å¿«ç…§æ°¸ä¹…ä¿ç•™ï¼ˆæ£€æµ‹åˆ°å¼‚å¸¸æ—¶è‡ªåŠ¨æ ‡è®°å¿«ç…§ä¸ºæ°¸ä¹…ä¿ç•™ï¼‰
  protect_abnormal_snapshots: true

# ============================================================
# æ—¥å¿—é…ç½®
# ============================================================
logging:
  # æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆå®¹å™¨å†…è·¯å¾„ï¼‰
  file: "/logs/gitea-mirror-backup.log"
  
  # æ—¥å¿—çº§åˆ«: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"
  
  # æ—¥å¿—æ ¼å¼
  format: "[%(asctime)s] %(levelname)s: %(message)s"
  
  # æ—¥æœŸæ ¼å¼
  date_format: "%Y-%m-%d %H:%M:%S"

# ============================================================
# æŠ¥å‘Šé…ç½®
# ============================================================
reports:
  # æŠ¥å‘Šç›®å½•ï¼ˆç›¸å¯¹äº backup.rootï¼‰
  directory: "reports"
  
  # æœ€æ–°æŠ¥å‘Šé“¾æ¥åç§°
  latest_link: "latest-report.md"

# ============================================================
# é€šçŸ¥é…ç½®
# ============================================================
# æ³¨æ„ï¼šæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ã€å¯†é’¥ï¼‰å»ºè®®åœ¨ .env æ–‡ä»¶ä¸­è®¾ç½®
notifications:
  # é‚®ä»¶é€šçŸ¥
  email:
    enabled: false
    smtp_host: "smtp.example.com"
    smtp_port: 587
    smtp_user: "user@example.com"
    smtp_password: ""  # å»ºè®®åœ¨ .env ä¸­è®¾ç½® EMAIL_SMTP_PASSWORD
    from_addr: "backup@example.com"
    to_addrs:
      - "admin@example.com"
    # é€šçŸ¥æ¡ä»¶ï¼šalways(æ€»æ˜¯), on_error(ä»…é”™è¯¯), on_alert(ä»…å¼‚å¸¸)
    notify_on: "on_alert"
    
  # Webhook é€šçŸ¥ï¼ˆé€šç”¨ï¼‰
  webhook:
    enabled: false
    url: ""  # å»ºè®®åœ¨ .env ä¸­è®¾ç½® WEBHOOK_URL
    method: "POST"
    headers:
      Content-Type: "application/json"
    notify_on: "on_alert"
  
  # ä¼ä¸šå¾®ä¿¡æœºå™¨äºº
  wecom:
    enabled: false
    webhook_url: ""  # å»ºè®®åœ¨ .env ä¸­è®¾ç½® WECOM_WEBHOOK_URL
    notify_on: "on_alert"
  
  # é’‰é’‰æœºå™¨äºº
  dingtalk:
    enabled: false
    webhook_url: ""  # å»ºè®®åœ¨ .env ä¸­è®¾ç½® DINGTALK_WEBHOOK_URL
    secret: ""  # å¯é€‰ï¼ŒåŠ ç­¾å¯†é’¥ï¼Œå»ºè®®åœ¨ .env ä¸­è®¾ç½® DINGTALK_SECRET
    notify_on: "on_alert"

# ============================================================
# é«˜çº§é…ç½®
# ============================================================
advanced:
  # å¹¶å‘å¤‡ä»½æ•°é‡ï¼ˆ0 è¡¨ç¤ºä¸²è¡Œï¼Œå»ºè®®ä¿æŒä¸º 0ï¼‰
  concurrent_backups: 0
  
  # å¤‡ä»½è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼Œ0 è¡¨ç¤ºæ— é™åˆ¶ï¼‰
  backup_timeout: 0
  
  # æ˜¯å¦åœ¨å¤‡ä»½å‰éªŒè¯ Docker å®¹å™¨
  verify_docker: true
  
  # æ˜¯å¦ç”Ÿæˆæ¢å¤è„šæœ¬
  generate_restore_script: true

