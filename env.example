# ============================================================
# Gitea Mirror Backup - 环境变量配置示例
# ============================================================
# 
# 📖 使用说明：
#   1. 复制此文件为 .env
#      cp .env.example .env
#   2. 修改下面的配置值
#   3. 不要将 .env 提交到版本控制（已在 .gitignore 中）
#
# 📚 配置优先级：
#   环境变量 (.env) > config.yaml > 默认值
#
# 💡 提示：
#   - 基础配置建议在 config/config.yaml 中设置
#   - 敏感信息和环境特定配置在此文件中设置
#   - 环境变量会覆盖 config.yaml 中的对应配置
#
# ============================================================

# ============================================================
# Web 服务配置（必需）
# ============================================================

# 安全密钥（生产环境必须修改！）
# 用于 JWT token 签名，建议使用随机字符串
# 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=change-this-secret-key-in-production

# 默认管理员账号配置（首次启动时创建）
# 如果数据库中已存在管理员账号，这些配置不会生效
DEFAULT_ADMIN_USERNAME=admin
DEFAULT_ADMIN_PASSWORD=admin123
DEFAULT_ADMIN_EMAIL=admin@example.com

# ============================================================
# 可选：覆盖 config.yaml 中的配置
# ============================================================

# 时区设置
# TZ=Asia/Shanghai

# Gitea 容器名称（如果与 config.yaml 不同）
# GITEA_DOCKER_CONTAINER=gitea

# 备份根目录（如果与 config.yaml 不同）
# BACKUP_ROOT=/shared/backup

# 要备份的组织列表（逗号分隔，留空表示备份所有）
# BACKUP_ORGANIZATIONS=Org1,Org2,Org3

# 是否只备份镜像仓库
# BACKUP_CHECK_MIRROR_ONLY=false

# 日志级别（DEBUG, INFO, WARNING, ERROR）
# LOG_LEVEL=INFO

# ============================================================
# 保留策略（可选覆盖）
# ============================================================

# 快照保留天数
# SNAPSHOT_RETENTION_DAYS=30

# 归档保留月数
# ARCHIVE_RETENTION_MONTHS=12

# 报告保留天数
# REPORT_RETENTION_DAYS=30

# ============================================================
# 异常检测阈值（可选覆盖）
# ============================================================

# 提交数减少阈值（百分比）
# COMMIT_DECREASE_THRESHOLD=10

# 仓库大小减少阈值（百分比）
# SIZE_DECREASE_THRESHOLD=30

# 是否保护异常快照
# PROTECT_ABNORMAL_SNAPSHOTS=true

# ============================================================
# 通知配置（敏感信息）
# ============================================================

# 企业微信机器人 Webhook URL
# WECOM_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your-key-here

# 钉钉机器人 Webhook URL
# DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/robot/send?access_token=your-token
# DINGTALK_SECRET=your-secret

# 邮件通知配置
# EMAIL_SMTP_HOST=smtp.example.com
# EMAIL_SMTP_PORT=587
# EMAIL_SMTP_USER=user@example.com
# EMAIL_SMTP_PASSWORD=your-password
# EMAIL_FROM_ADDR=backup@example.com
# EMAIL_TO_ADDRS=admin@example.com,team@example.com

# 自定义 Webhook URL
# WEBHOOK_URL=https://your-webhook-endpoint.com/notify

# ============================================================
# Web 服务特定配置（可选）
# ============================================================

# 数据库 URL（默认使用 SQLite）
# DATABASE_URL=sqlite:///./data/web.db

# Web 服务端口（在 docker-compose.yml 中设置）
# WEB_PORT=8010

# CORS 允许的源（JSON 数组格式）
# CORS_ORIGINS=["http://localhost:5173","http://localhost:8000"]

# ============================================================
# 高级配置（可选）
# ============================================================

# 并发备份数量（0 表示串行）
# CONCURRENT_BACKUPS=0

# 备份超时时间（秒，0 表示无限制）
# BACKUP_TIMEOUT=0

# 是否在备份前验证 Docker 容器
# VERIFY_DOCKER=true

# 是否生成恢复脚本
# GENERATE_RESTORE_SCRIPT=true

# ============================================================
# 开发/调试配置
# ============================================================

# 是否启用调试模式
# DEBUG=false

# 日志文件路径
# LOG_FILE=/logs/gitea-mirror-backup.log
